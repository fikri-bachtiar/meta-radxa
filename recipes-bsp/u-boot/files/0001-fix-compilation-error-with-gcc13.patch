From 990664d350f2814bed58e02b7403afec84646dca Mon Sep 17 00:00:00 2001
From: Fikri Bachtiar <fikriachmadbachtiarr@gmail.com>
Date: Sat, 28 Sep 2024 21:38:04 +0700
Subject: [PATCH] fix: compilation error with gcc13

---
 arch/arm/mach-rockchip/resource_img.c | 2 +-
 include/command.h                     | 4 ++--
 scripts/dtc/dtc-lexer.lex.c_shipped   | 2 +-
 3 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/arch/arm/mach-rockchip/resource_img.c b/arch/arm/mach-rockchip/resource_img.c
index 8f08462820b..9e7c2d8e46c 100755
--- a/arch/arm/mach-rockchip/resource_img.c
+++ b/arch/arm/mach-rockchip/resource_img.c
@@ -114,7 +114,7 @@ static int resource_image_check_header(const struct resource_img_hdr *hdr)
 	ret = memcmp(RESOURCE_MAGIC, hdr->magic, RESOURCE_MAGIC_SIZE);
 	if (ret) {
 		printf("bad resource image magic: %s\n",
-		       hdr->magic ? hdr->magic : "none");
+		       hdr->magic);
 		ret = -EINVAL;
 	}
 	debug("resource image header:\n");
diff --git a/include/command.h b/include/command.h
index 767cabb3df0..63a1c1d05a9 100644
--- a/include/command.h
+++ b/include/command.h
@@ -139,8 +139,8 @@ enum command_ret_t {
  *			number of ticks the command took to complete.
  * @return 0 if the command succeeded, 1 if it failed
  */
-int cmd_process(int flag, int argc, char * const argv[],
-			       int *repeatable, unsigned long *ticks);
+enum command_ret_t cmd_process(int flag, int argc, char * const argv[],
+			       			   int *repeatable, unsigned long *ticks);
 
 void fixup_cmdtable(cmd_tbl_t *cmdtp, int size);
 
diff --git a/scripts/dtc/dtc-lexer.lex.c_shipped b/scripts/dtc/dtc-lexer.lex.c_shipped
index 011bb9632ff..c3b631631cb 100644
--- a/scripts/dtc/dtc-lexer.lex.c_shipped
+++ b/scripts/dtc/dtc-lexer.lex.c_shipped
@@ -631,7 +631,7 @@ char *yytext;
 #include "srcpos.h"
 #include "dtc-parser.tab.h"
 
-YYLTYPE yylloc;
+extern YYLTYPE yylloc;
 extern bool treesource_error;
 
 /* CAUTION: this will stop working if we ever use yyless() or yyunput() */
